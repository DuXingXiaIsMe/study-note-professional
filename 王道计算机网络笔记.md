# 一、物理层

# 二、数据链路层

1. TCP/IP模型中，网际层提供的无连接不可靠服务。

2. 在TCP/IP参考模型中，直接为ICMP提供服务的是IP协议，而不是按照从下而上的思路得出来的PPP（数据链路层）协议。

3. 传播时延的计算中，一般取信道的传播速率为200000km/s。

4. 奈奎斯特定理

   > 奈奎斯特无噪声下的码元速率极限值B与信道带宽H的关系——最大数据传输率B=2*H（波特）
   >
   > 奈奎斯特公式--无噪信道传输能力公式：
   >
   > ​	C=2xHxlog~2~N(bps)
   >
   > ​	C=Bxlog~2~N(bps)
   >
   > H为信道的带宽，即信道传输上下限频率的差值，单位为Hz；
   >
   > N为一个码元所取的离散值个数。

5. 香农公式--带噪信道容量公式

   > C=Hxlog~2~(1+S/N)(bps)
   >
   > S为信号功率，N为噪声功率，S/N为信噪比，通常信噪比表示成10lg(S/N)分贝(dB)

6. 分组交换的总传输时延计算：总传输时延=整个数据在发送端的传输时延+最后一个分组在中间路段的传输时延

7. CRC校验中，除法运算的相减时，对应每位值相同为0,不同为1.

8. 帧：滑动窗口信道利用率：T~d~/(T~d~+RTT+T~a~)，分母为一个帧的传输周期；若在一个传输周期内不等待，一直发送n个帧，则利用率为：n*T~d~/(T~d~+RTT+T~a~)。

9. 窗口中帧的序号编码与发送窗口大小问题

   > n个比特对序号编码，则有序号0 ~ 2^n-1^
   >
   > 退回n帧——发送窗口大小2^n^-1
   >
   > 选择重传——发送窗口大小2^n-1^

10. 使用CSMA/CD协议的以太网不能进行全双工通信而只能进行半双工通信（双向交替通信）。每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。

11. 发送数据帧的站，在经过至多两倍的端到端往返时延，可知道是否发生了碰撞。该时间称为争用期，或碰撞窗口。经过争用期还未检测到碰撞，则能肯定这次发送不会发生碰撞。

12. 10M以太网中，争用期的长度为51.2微秒

13. 100M以太网中，争用期的长度为5.12微秒

14. 以太网规定最短有效帧长为64字节，即512比特；最短有效帧长=带宽*争用期

15. 重传次数达到16时，丢弃并向上层报告。

16. CSMA/CD协议中，发送前若检测到信道空闲，并在96比特时间内信道保持空闲（保证了帧间最小间隔），就发送帧。

17. 无线局域网不能使用CSMA/CD协议的原因：隐蔽站问题、暴露站问题

    > 隐蔽站问题：两个局域网交界处的站点无法接收数据，但没有检测到碰撞
    >
    > 暴露站问题：两个各自向另外的站点通信，站点检测到碰撞，但这是没有影响的

18. ![1595571886425](/home/qinglin/.config/Typora/typora-user-images/1595571886425.png)

19. 对DCF和PCF的分析

    > DCF子层在每一个结点使用CSMA机制的分布式接入算法，让各个站通过争用信道来获取发送权，因此DCF向上提供争用服务。
    >
    > PCF子层使用集中控制的接入算法把发送数据权轮流交给各个站从而避免了碰撞的产生。

20. 无线局域网帧间间隔IFS

    > 所有的站在完成发送后，必须再等待一段很短的时间（继续监听）才能发送下一帧，这段时间即为帧间间隔IFS（InterFrame Space）。
    >
    > 帧间间隔长度取决于该站欲发送的帧的类型，高优先级帧需要等待的时间较短，可以优先获得发送权。
    >
    > 若低优先级帧还没来得及发送而其他站的高优先级帧已经发送到媒体，则媒体变为忙态，因而低优先级帧只能再推迟发送，这样就减少了发生碰撞的机会。
    >
    > SIFS，短帧间间隔，长度为28微秒，用来分隔开属于一次对话的各帧。
    >
    > DIFS，分布协调功能帧间间隔，长度为128微秒，在DCF方式中，用来发送数据帧和管理帧。

21. CSMA/CA的退避计时器

    > 站点每经历一个时隙的时间就检测一次信道，此时会发生两种情况：
    >
    > 1. 若检测到信道空闲，退避计时器就继续倒计时
    > 2. 若检测到信道忙，就冻结退避计时器的剩余时间，重新等待信道变为空闲并经过时间DIFS后，从剩余时间继续倒计时
    >
    > 如果退避计时器的剩余时间减少到0时，就开始发送整个数据帧。

22. ![1595574300549](/home/qinglin/.config/Typora/typora-user-images/1595574300549.png)

23. ![1595574483081](/home/qinglin/.config/Typora/typora-user-images/1595574483081.png)

24. 802.11数据帧的首部：30字节。帧的数据部分，不超过2312字节。帧的尾部：帧检验序列FCS，4字节。

25. ![1595574729413](/home/qinglin/.config/Typora/typora-user-images/1595574729413.png)

26. 上面截图中，对应情景为：A----->AP------->B，A对B的通信。

27. MAC地址：48位

    > 第一、二、三字节是由IEEE规定的。
    >
    > 第一字节的最低位为I/G位，表示Individual/Group。该位为0时，地址字段表示一个单站地址；该位为1，表示组地址，用来进行多播。
    >
    > 所有48位都为1时，为广播地址，只能作为目的地址使用。
    >
    > 第一字节的最低第二位为G/L位，表示Global/Local。该位为0时，是全球管理，保证在全球没有相同的地址；该位为1时，是本地管理，用户可以任意分配网络上的地址。

28. 无效的MAC帧

    > 1. 数据字段的长度与长度字段的值不一致
    > 2. 数据字段的长度不在46-1500字节之间
    > 3. 有效的MAC帧长度为64-1518字节之间

29. 网桥能隔离冲突域

30. 交换机的三种数据交换方式：直通转发、存储转发，和介于两者之间的碎片隔离（发送前检查帧长，小于64字节丢弃，随后直通转发方式）。

31. 有效数据传输速率=发送的有效数据 / 发送有效数据所用的总时间

    > 所谓有效数据，是指1500字节的数据部分，而不是1518字节的帧长。
    >
    > 总时间中，发送帧的时间+帧的传播时间+确认帧的发送+确认帧的传播。

# 三、网络层



1. 路由器中的路由表，默认路由的写法：0.0.0.0/0.0.0.0，前面是IP地址，后面是子网掩码。

2. IPv4的首部

   > 版本：4b，0100=4
   >
   > 首部长度：4b，0101=5（若可变部分为0），首部长度除以4B---20B除以4B=5=0101（若可变部分为0）；可以逆推出可变部分最大为40B
   >
   > 区分服务：8b
   >
   > 总长度：16b，整个IP数据报的长度
   >
   > 标识：16b，也称为计数器，应用于分片
   >
   > 标志：3b，DF=1不允许分片，MF=1更多分片，MF=0更多分片中的最后一片
   >
   > 片偏移：13b，某片在原分组中的相对位置，==偏移单位为8字节==
   >
   > 生存时间：8b，TTL，是一个跳数，一般为128或64，为0不再转发
   >
   > 协议：8b，指明数据部分的数据提交给上层的哪个协议
   >
   > 首部校验和：16b，数据报每经过一跳时都要变化
   >
   > 源地址：32b
   >
   > 目的地址：32b

3. IP地址中的特殊地址

   | 网络号 | 主机号             | 源地址使用 | 目的地址使用 | 代表的意思                                             |
   | ------ | ------------------ | ---------- | ------------ | ------------------------------------------------------ |
   | 0      | 0                  | 可以       | 不可以       | 在本网络上的本主机（DHCP协议）                         |
   | 0      | host-id            | 可以       | 不可以       | 在本网络上的某台主机host-id                            |
   | 全1    | 全1                | 不可以     | 可以         | 只在本网络上进行广播（各路由器均不转发）               |
   | net-id | 全1                | 不可以     | 可以         | 对net-id上的所有主机进行广播（路由器要转发，直接广播） |
   | 127    | 非全0或全1的任何数 | 可以       | 可以         | 用作本地软件环回测试之用                               |

4. IP地址是标志一个主机（或路由器）和一条链路的接口。当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的IP地址，其网络号必须是不同的，这种主机称为多归属主机。

5. 一个路由器至少应当连接到两个网络（为了实现转发），所以至少应当有两个不同的IP地址。

6. 用交换机、转发器、网桥连接的若干个局域网任然属于同一个网络。

7. NAT是本地IP地址和全球IP地址绑定的方式，NAPT是本地IP地址+端口号和全球IP地址+端口号的绑定方式。

8. 路由聚集的使用方法

   > 1. 聚集多个子网时，采用最长网络前缀匹配。
   > 2. 路由表中聚集多个子网时，只有下一跳相同时才用。

9. CIDR的简写：10.0.0.0/10可以简写为10/10。即把点分十进制中低位连续的0省略。还有另外一种写法：网络前缀加*号，星号前面是网络前缀。

10. 各层的协议

    | 层次       | 协议                              |
    | ---------- | --------------------------------- |
    | 应用层     | HTTP、FTP、SMTP等                 |
    | 传输层     | TCP、UDP                          |
    | 网络层     | ICMP、IGMP<br />IP<br />RARP、ARP |
    | 数据链路层 |                                   |
    | 物理层     | 物理硬件                          |

    >  需要注意，DHCP本质上是应用层，但统考在网络层
    >
    > 网络层的理解：网络层就是IP协议，只是IP协议下一点有RARP和ARP，上一点有ICMP和IGMP，但不会越出网络层。

11. IP地址转物理地址：ARP。物理地址转ARP：RARP。

12. DHCP的工作流程

    > host to server:DHCPDISCOVER
    >
    > server to host:DHCPOFFER
    >
    > host to server:DHCPREQUEST
    >
    > server to host:DHCPACK
    >
    > 以上，主机得到IP地址
    >
    > 
    >
    > 以下，主机IP地址租赁期到了，重新请求
    >
    > host to server:DHCPREQUEST
    >
    > server to host:DHCPACK
    >
    > or
    >
    > server to host:DHCPNACK
    >
    > 
    >
    > 以下，主机请求释放IP地址
    >
    > host to server:DHCPRELEASE

13. ICMP报文的格式

    ![1595784557973](/home/qinglin/.config/Typora/typora-user-images/1595784557973.png)

14. IPv6：地址长度为128b，数据报固定基本首部长度为4B，首部字段数8个，取消分片，取消首部校验和，基本首部后面允许没有或有多个扩展首部，所有的扩展首部和数据合起来叫做数据报的有效载荷（payload）或净负荷。

15. IPv6记法：冒号分隔，每个16位的值用十六进制表示。也有冒号和点分十进制混合使用。CIDR记法也使用。

16. IPv6特殊地址

    > 未指明地址：128位的全0地址，可缩写为两个冒号，该地址为还没有配置到一个标准的IP地址的主机当作源地址使用。
    >
    > 环回地址：最后一位为1，其余全0，记为::1
    >
    > 与IPv4兼容的地址：前面全0，后面为v4地址

17. RIP路由表更新解题步骤

    > 1. 将收到的路由表中的每一个路由项的距离加1，下一跳为发送路由表的路由器
    > 2. 路由项存在，下一跳相同，更新
    > 3. 路由项不存在，更新
    > 4. 路由项存在，下一跳不同，只有距离更少才更新
    
18. OSPF分组

    > 1. 分组首部长度为24字节
    > 2. 版本：8b
    > 3. 类型：8b
    > 4. 分组长度：16b
    > 5. 路由器标识符：32b
    > 6. 区域标识符：32b
    > 7. 检验和：16b
    > 8. 鉴别类型：16b
    > 9. 鉴别：32b
    > 10. 鉴别：32b
    > 11. 分组数据部分：类型1至类型5的OSPF分组

19. OSPF的五种分组类型

    > 1. 类型1：问候分组（Hello），用来维持和发现邻站的可达性
    > 2. 类型2：数据库描述分组（DD），向邻站发送数据库的摘要信息
    > 3. 类型3：链路状态请求分组（LSR），请求发送数据库链路的详细信息
    > 4. 类型4：链路状态更新分组（LSU），用洪泛法对全网更新链路状态
    > 5. 类型5：链路状态确认分组（LSA），对链路更新分组的确认

20. 构造静态路由表的四种方式

    > 1. 直连路由
    > 2. 间接路由
    > 3. 默认路由
    > 4. 主机路由






# 四、题目要点记录

【第一章】

错题：5、6、10、16，4（操你妈想不透）

1. 计算机网络三个关键点：自治计算机（软件和硬件两部分组成，能完整地实现计算机的各种功能），互联（计算机之间能实现相互通信），集合体（所有使用通信线路及互联设备连接起来的自治计算机的集合）。
2. 计算机网络最基本的功能是数据通信功能。
3. 计算机网络三大主要功能是数据通信、资源共享及分布式处理。
4. 计算机网络中可以没有数据库管理系统。
5. 网络资源包括硬件资源、软件资源和数据资源。
6. 广域网和局域网的差异：覆盖范围的不同，采用协议和网络技术的不同（广域网：点对点等技术。局域网：广播技术）。
7. 区分广域网和局域网的关键在于使用的协议。
8. 常见的中心结点为集线器（星型拓扑），工作在物理层。
9. 局域网工作在数据链路层。
10. 总线型是广播式。
11. 